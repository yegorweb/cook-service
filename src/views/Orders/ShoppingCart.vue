<template>
    <div class="container">
        <TitleAndBack :onBackClick="'home'">{{items.length}} –±–ª—é–¥ {{items.length!=0 ? items.map(item => item.amount * (item.info.price + item.additions.map(i => i.selected ? x+=i.price : x+=0, x=0).reverse()[0], x=0)).reverse()[0] : ''}}</TitleAndBack>
        <div class="items-cont container">
            <template v-if="items.length!=0">
                <ShoppingCartItem v-for="item in items" :key="item" :item="item" />
                <ShoppingCartPersons :persons="persons" />
                <ShoppingCartDelivery :delivery="delivery" />
            </template>
            <div v-else class="no">–û—Ç—Å—É—Ç—Å–≤—É–µ—Ç üò±</div>
        </div>
    </div>
</template>

<script setup>
import TitleAndBack from '@/components/TitleAndBack.vue';
import { inject, ref } from 'vue';
import Input from '../../components/Input.vue';
import ShoppingCartItem from '../../components/ShoppingCart/ShoppingCartItem.vue';
import ShoppingCartPersons from '../../components/ShoppingCart/ShoppingCartPersons.vue';
import ShoppingCartDelivery from '../../components/ShoppingCart/ShoppingCartDelivery.vue';

var items = ref([{
    like: false,
    category: '–ó–∞–∫—É—Å–∫–∏',
    imageSource: 'src/assets/item-image.jpg',
    peculiarities: [{
        name: '–û—Å—Ç—Ä—ã–π',
        imageSource: 'src/assets/spicy.svg'
    },
    {
        name: '–ù–µ –æ—á–µ–Ω—å –æ—Å—Ç—Ä—ã–π',
        imageSource: 'src/assets/spicy.svg'
    }],
    name: '–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Å –ª—É–∫–æ–º –∏ –±–µ–ª—ã–º–∏ –≥—Ä–∏–±–∞–º–∏',
    info: {
        weight: '320 –≥',
        calories: '1 040 –∫–∫–∞–ª',
        price: 430
    },
    additions: [{
        name: '–ü–æ–±–æ–ª—å—à–µ –ª—É–∫–∞',
        price: 20,
        selected: false
    },
    {
        name: '–ü–æ –¥–æ–º–∞—à–Ω–µ–º—É',
        price: 0,
        selected: true
    },
    {
        name: '–ì—Ä–∏–±–æ–≤ –ø–æ–±–æ–ª—å—à–µ',
        price: 300,
        selected: false
    }],
    description: '–≠—Ç–æ –≤–∫—É—Å–Ω–æ–µ –∏ —Å—ã—Ç–Ω–æ–µ –±–ª—é–¥–æ —è–≤–ª—è–µ—Ç—Å—è –ª—é–±–∏–º—ã–º –±–ª—é–¥–æ–º –≤–æ –º–Ω–æ–≥–∏—Ö —Å–µ–º—å—è—Ö, –ø–æ–ª—é–±–∏—Ç–µ –µ–≥–æ –∏ –≤—ã.',
    amount: 1
}])
var test = ref('')
var persons = ref(1)
var delivery = ref(0)
</script>

<style lang="scss" scoped>
@import '@/assets/style.scss';
.items-cont {
    margin-top: rem(30);
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: rem(10);
}
.no {
    font-family: 'Gilroy';
    font-weight: 700;
    font-size: rem(22);
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
}
</style>